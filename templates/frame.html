<form ng-show="showLogin" class="form-inline" role="form" id="svn_form">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <b ng-i18next="panel_svn_frame"></b>
    </div>
    <div class="panel-body">
      <div class="form-group">
        <label for="svnUrl" ng-i18next="label_svnurl"></label><br>
        <div class="input-group">
          <span class="input-group-addon" style="font-weight:bold;" id="svnBaseUrl">{{ svnBaseUrl }}</span>
          <input type="text" style="width:300px;" class="form-control" id="svnUrl" name="svnUrl" ng-model="params.svnUrl">
        </div>
      </div><br>
      <div class="form-group">
        <label for="svnRev" ng-i18next="label_svnrev"></label><br>
        <input type="text" class="form-control" name="svnRev" ng-model="params.svnRev">
      </div><br>
      <div class="form-group">
        <label for="username" ng-i18next="label_username"></label><br>
        <input type="text" class="form-control" name="username" ng-model="params.username">
      </div><br>
      <div class="form-group">
        <label for="password" ng-i18next="label_password"></label><br>
        <input type="password" class="form-control" name="password" ng-model="params.password">
      </div><br>
      <div class="checkbox">
        <input type="checkbox" name="remember" ng-model="params.remember"> <span ng-i18next="label_remember"></span>
      </div><br>
      <input type="submit" class="btn btn-primary" ng-click="checkoutSvn();" ng-i18next="[value]label_submit"></input>
      <input type="submit" class="btn btn-default" ng-click="updateCommon();" ng-i18next="[value]label_update_common;[title]label_update_common_title"></input>
    </div>
  </div>
</form>
<div class="well well-sm">
  <b>Options :</b>
  <span ng-hide="showLogin">
    <span ng-i18next="label_svnurl"></span> {{ params.svnUrl }}
    <span ng-show="params.svnRev">@ {{ params.svnRev }}</span> &bull;
    <span ng-i18next="label_username"></span> {{ params.username }} &bull;
  </span>
  <span ng-show="params.recursive"><span ng-i18next="label_recimport_short"></span> &bull;</span>
  <span ng-show="params.noimport"><span ng-i18next="label_noimport_short"></span> &bull;</span>
  <span ng-i18next="label_locale_en"></span> {{ params.localeEn }} &bull;
  <span ng-i18next="label_theme_lti"></span> {{ params.theme }}
  <button class="btn btn-default btn-xs" ng-click="displayFull();" ng-i18next="label_display_full"></button>
</div>
<div ng-if="checkoutState && checkoutState != 'checkout_finished'" class="alert alert-info">
  <b><span ng-i18next="{{ checkoutState }}"></span> <span ng-if="checkoutMsg" ng-i18next="{{ checkoutMsg }}"></span></b>
  <span ng-if="tasksRemaining.length">
    <br />{{ tasksRemaining.length }} <span ng-i18next="display_tasks_left"></span>
  </span>
</div>
<div ng-repeat="log in logList">
  <div class="panel" ng-class="{'panel-primary': log.active, 'hidden': !log.active}">
    <div class="panel-heading">
      <h3 class="panel-title">{{ log.url }} <small>(rev {{ log.svnRev }})</small></h3>
    </div>
    <div class="panel-body">
      <p ng-if="log.ltiUrl"><b ng-i18next="task_ltiurl"></b>: <a href="{{ makeUrl(log.ltiUrl) }}" target="_blank">{{ makeUrl(log.ltiUrl, null, true) }}</a></p>
      <ul ng-if="log.foundLangs.length > 1">
        <li ng-repeat="taskLang in log.foundLangs"><span ng-i18next="task_ltiurl_lang"></span> {{ taskLang }} : <a ng-href="{{ makeUrl(log.ltiUrl, taskLang, true) }}" target="_blank">{{ makeUrl(log.ltiUrl, taskLang, true) }}</a></li>
      </ul>
      <p ng-if="log.normalUrl"><b ng-i18next="task_normalurl"></b>: <a href="{{ log.normalUrl }}" target="_blank">{{ makeUrl(log.normalUrl) }}</a></p>
      <div ng-if="log.tokenUrl && log.foundLangs.length <= 1">
        <p><a class="btn btn-default" href="{{ log.tokenUrl }}" target="_blank" ng-i18next="task_test"></a> <i ng-i18next="task_test_description"></i></p>
      </div>
      <div ng-if="log.tokenUrl && log.foundLangs.length > 1">
        <span ng-repeat="taskLang in log.foundLangs"><a class="btn btn-default" ng-href="{{ makeUrl(log.tokenUrl, taskLang) }}" target="_blank"><span ng-i18next="task_test_lang"></span> {{ taskLang }}</a> </span>
        <p><i ng-i18next="task_test_description"></i></p>
      </div>
      <hr ng-if="log.normalUrl" />
      <p><span ng-i18next="status"></span>: <span ng-i18next="{{ log.state }}"></span></p>
      <p ng-if="log.doubleLang" ng-i18next="task_doublelang"></p>
      <p ng-if="log.foundLangsStr"><span ng-i18next="task_langs"></span> : {{ log.foundLangsStr }}.</p>
      <hr ng-if="log.files" />
      <div ng-repeat="file in log.files">
        <p><code>{{ file.name }}</code>: <span ng-i18next="{{ file.state }}"></span></p>
        <p ng-if="file.isStatic"><span ng-i18next="display_static"></span> <a href="{{ file.url }}">{{ file.url }}</a></p>
        <p ng-if="file.warnPaths" ng-i18next="display_warnpaths"></p>
      </div>
    </div>
  </div>
</div>

<iframe style="width:1px; height:1px;" id="taskIframe" src="{{ curTaskUrl }}"></iframe>
